<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>xilplmi: xplmi_ssit.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="HTML_custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="xlogo_bg.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">xilplmi
   </div>
   <div id="projectbrief">Vitis Drivers API Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Overview</span></a></li>
      <li><a href="globals.html"><span>APIs</span></a></li>
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('xplmi__ssit_8c.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">xplmi_ssit.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Overview</h2>
<div class="textblock"><p>This file contains the SSIT related code and is applicable only for versal. </p>
<pre>
MODIFICATION HISTORY:</pre><pre>Ver   Who  Date        Changes
----- ---- -------- -------------------------------------------------------
1.00  ma   08/13/2019 Initial release
      ma   08/24/2019 Added SSIT commands
1.01  bsv  04/04/2020 Code clean up
1.02  bm   10/14/2020 Code clean up
                td   10/19/2020 MISRA C Fixes
1.03  ma   12/17/2021 Do not check for SSIT errors during synchronization
1.04  tnt  01/10/2022 Update ssit_sync* code to wait for each slave mask
      bm   01/20/2022 Fix compilation warnings in Xil_SMemCpy
1.05  ma   05/10/2022 Added PLM to PLM communication feature
      bsv  06/03/2022 Add CommandInfo to a separate section in elf
      hb   06/15/2022 Removed static declaration of XPlmi_SsitGetSlrAddr
      is   07/10/2022 Added support for XPlmi_SsitSendMsgEventAndGetResp API
      bm   07/24/2022 Set PlmLiveStatus during boot time
      ma   08/10/2022 Added dummy PLM to PLM communication APIs to be used
                      by other components when the feature is not enabled
                      Also, check if SSIT interrupts are enabled before
                      triggering any event
      ma   09/02/2022 Clear SSIT Errors in PMC_ERR2_STATUS register in
                      Slave SLRs after completing synchronization
      ma   09/17/2022 Check SlavesMask before checking for sync initiation
                      from Slave SLRs in XPlmi_SsitSyncEventHandler
1.06  skg  10/04/2022 Added logic to handle invalid commands
      ng   11/11/2022 Fixed doxygen file name error
      is   12/19/2022 Formatting, warning fixes in XPlmi_SendIpiCmdToSlaveSlr
      is   12/19/2022 Added support for XPLMI_SLRS_SINGLE_EAM_EVENT_INDEX
      bm   01/03/2023 Handle SSIT Events from PPU1 IRQ directly
      bm   01/03/2023 Notify Other SLRs about Secure Lockdown</pre><pre></pre><dl class="section note"><dt>Note</dt><dd></dd></dl>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga0060d3f27c5c714f99941cd06d0142d0"><td class="memItemLeft" align="right" valign="top">u8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xplmi__apis.html#ga0060d3f27c5c714f99941cd06d0142d0">XPlmi_GetSlrIndex</a> (void)</td></tr>
<tr class="memdesc:ga0060d3f27c5c714f99941cd06d0142d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is used to get the local SLR index.  <a href="group__xplmi__apis.html#ga0060d3f27c5c714f99941cd06d0142d0">More...</a><br/></td></tr>
<tr class="separator:ga0060d3f27c5c714f99941cd06d0142d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga873411286b21b899a8a6782b9b0a6b1b"><td class="memItemLeft" align="right" valign="top">u32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xplmi__apis.html#ga873411286b21b899a8a6782b9b0a6b1b">XPlmi_GetSlavesSlrMask</a> (void)</td></tr>
<tr class="memdesc:ga873411286b21b899a8a6782b9b0a6b1b"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is used to get the combined mask of all slave SLRs.  <a href="group__xplmi__apis.html#ga873411286b21b899a8a6782b9b0a6b1b">More...</a><br/></td></tr>
<tr class="separator:ga873411286b21b899a8a6782b9b0a6b1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf7ceffb7348ed1c37af238f02df63905"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xplmi__apis.html#gaf7ceffb7348ed1c37af238f02df63905">XPlmi_SsitRegisterEvent</a> (u32 EventIndex, XPlmi_EventHandler_t Handler, u8 EventOrigin)</td></tr>
<tr class="memdesc:gaf7ceffb7348ed1c37af238f02df63905"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is used to register any event between Master and Slave SLRs.  <a href="group__xplmi__apis.html#gaf7ceffb7348ed1c37af238f02df63905">More...</a><br/></td></tr>
<tr class="separator:gaf7ceffb7348ed1c37af238f02df63905"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae07fd84a364236b869b74f56a55a1f1e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xplmi__apis.html#gae07fd84a364236b869b74f56a55a1f1e">XPlmi_SsitWriteEventBufferAndTriggerMsgEvent</a> (u8 SlrIndex, u32 *ReqBuf, u32 ReqBufSize)</td></tr>
<tr class="memdesc:gae07fd84a364236b869b74f56a55a1f1e"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is used to write the event buffer data and trigger the Message Event.  <a href="group__xplmi__apis.html#gae07fd84a364236b869b74f56a55a1f1e">More...</a><br/></td></tr>
<tr class="separator:gae07fd84a364236b869b74f56a55a1f1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5ef6b32fe8a4519644b90ca780397e4a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xplmi__apis.html#ga5ef6b32fe8a4519644b90ca780397e4a">XPlmi_SsitReadEventBuffer</a> (u32 *ReqBuf, u32 ReqBufSize)</td></tr>
<tr class="memdesc:ga5ef6b32fe8a4519644b90ca780397e4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is used to read the event buffer of Master SLR in Slave SLRs where the message event is received.  <a href="group__xplmi__apis.html#ga5ef6b32fe8a4519644b90ca780397e4a">More...</a><br/></td></tr>
<tr class="separator:ga5ef6b32fe8a4519644b90ca780397e4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae5d1464d41ef967f174542299449cad8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xplmi__apis.html#gae5d1464d41ef967f174542299449cad8">XPlmi_SsitTriggerEvent</a> (u8 SlrIndex, u32 EventIndex)</td></tr>
<tr class="memdesc:gae5d1464d41ef967f174542299449cad8"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is used to trigger the given event to the given SLR.  <a href="group__xplmi__apis.html#gae5d1464d41ef967f174542299449cad8">More...</a><br/></td></tr>
<tr class="separator:gae5d1464d41ef967f174542299449cad8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga510deac0c8054dc5352bcd297e48dac3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xplmi__apis.html#ga510deac0c8054dc5352bcd297e48dac3">XPlmi_SsitWaitForEvent</a> (u8 SlrIndex, u32 EventIndex, u32 TimeOut)</td></tr>
<tr class="memdesc:ga510deac0c8054dc5352bcd297e48dac3"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is used to wait for the event to be acknowledged by the given SLR after triggering.  <a href="group__xplmi__apis.html#ga510deac0c8054dc5352bcd297e48dac3">More...</a><br/></td></tr>
<tr class="separator:ga510deac0c8054dc5352bcd297e48dac3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacadf5fc2d6cee12eac80dfec967c2c3f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xplmi__apis.html#gacadf5fc2d6cee12eac80dfec967c2c3f">XPlmi_SsitReadResponse</a> (u8 SlrIndex, u32 *RespBuf, u32 RespBufSize)</td></tr>
<tr class="memdesc:gacadf5fc2d6cee12eac80dfec967c2c3f"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is used to read the response (if applicable) in Master SLR once the event is acknowledged by Slave SLR.  <a href="group__xplmi__apis.html#gacadf5fc2d6cee12eac80dfec967c2c3f">More...</a><br/></td></tr>
<tr class="separator:gacadf5fc2d6cee12eac80dfec967c2c3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2475d6e57ee465119b1bb88bd17c0588"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xplmi__apis.html#ga2475d6e57ee465119b1bb88bd17c0588">XPlmi_SsitWriteResponseAndAckMsgEvent</a> (u32 *RespBuf, u32 RespBufSize)</td></tr>
<tr class="memdesc:ga2475d6e57ee465119b1bb88bd17c0588"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is used to write the response (if applicable) in Slave SLR once the event is handled and acknowledge the message event.  <a href="group__xplmi__apis.html#ga2475d6e57ee465119b1bb88bd17c0588">More...</a><br/></td></tr>
<tr class="separator:ga2475d6e57ee465119b1bb88bd17c0588"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3e27e5bd43606860f63a38572f4821bf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xplmi__apis.html#ga3e27e5bd43606860f63a38572f4821bf">XPlmi_SsitAcknowledgeEvent</a> (u8 SlrIndex, u32 EventIndex)</td></tr>
<tr class="memdesc:ga3e27e5bd43606860f63a38572f4821bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is used to acknowledge the event after handling.  <a href="group__xplmi__apis.html#ga3e27e5bd43606860f63a38572f4821bf">More...</a><br/></td></tr>
<tr class="separator:ga3e27e5bd43606860f63a38572f4821bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2e76ea091646d92e7a0482e67602b86f"><td class="memItemLeft" align="right" valign="top">u64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xplmi__apis.html#ga2e76ea091646d92e7a0482e67602b86f">XPlmi_SsitGetSlrAddr</a> (u32 Address, u8 SlrIndex)</td></tr>
<tr class="memdesc:ga2e76ea091646d92e7a0482e67602b86f"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is used to get the global SLR address for the given local address.  <a href="group__xplmi__apis.html#ga2e76ea091646d92e7a0482e67602b86f">More...</a><br/></td></tr>
<tr class="separator:ga2e76ea091646d92e7a0482e67602b86f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafd7eb4ca501aab712353daf78cfb4863"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xplmi__apis.html#gafd7eb4ca501aab712353daf78cfb4863">XPlmi_SsitSendMsgEventAndGetResp</a> (u8 SlrIndex, u32 *ReqBuf, u32 ReqBufSize, u32 *RespBuf, u32 RespBufSize, u32 WaitForEventCompletion)</td></tr>
<tr class="memdesc:gafd7eb4ca501aab712353daf78cfb4863"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function sends a message event with given request buffer to a slave SLR, waits for event completion, reads the response from the slave SLR and returns it to the caller.  <a href="group__xplmi__apis.html#gafd7eb4ca501aab712353daf78cfb4863">More...</a><br/></td></tr>
<tr class="separator:gafd7eb4ca501aab712353daf78cfb4863"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf24bb1ce85073deed1339422ee5d915f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xplmi__apis.html#gaf24bb1ce85073deed1339422ee5d915f">XPlmi_SsitSyncMaster</a> (XPlmi_Cmd *Cmd)</td></tr>
<tr class="memdesc:gaf24bb1ce85073deed1339422ee5d915f"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function provides SSIT Sync Master command execution.  <a href="group__xplmi__apis.html#gaf24bb1ce85073deed1339422ee5d915f">More...</a><br/></td></tr>
<tr class="separator:gaf24bb1ce85073deed1339422ee5d915f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad6d0e16deb820f98b18689dc9966f3ff"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xplmi__apis.html#gad6d0e16deb820f98b18689dc9966f3ff">XPlmi_SsitSyncSlaves</a> (XPlmi_Cmd *Cmd)</td></tr>
<tr class="memdesc:gad6d0e16deb820f98b18689dc9966f3ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function provides SSIT Sync Slaves command execution.  <a href="group__xplmi__apis.html#gad6d0e16deb820f98b18689dc9966f3ff">More...</a><br/></td></tr>
<tr class="separator:gad6d0e16deb820f98b18689dc9966f3ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5cb88dc15cd3354f65b346c3e92c2d88"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xplmi__apis.html#ga5cb88dc15cd3354f65b346c3e92c2d88">XPlmi_SsitWaitSlaves</a> (XPlmi_Cmd *Cmd)</td></tr>
<tr class="memdesc:ga5cb88dc15cd3354f65b346c3e92c2d88"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function provides SSIT Wait Slaves command execution.  <a href="group__xplmi__apis.html#ga5cb88dc15cd3354f65b346c3e92c2d88">More...</a><br/></td></tr>
<tr class="separator:ga5cb88dc15cd3354f65b346c3e92c2d88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga09694a4b8467a90ed7afdda529d5f721"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xplmi__apis.html#ga09694a4b8467a90ed7afdda529d5f721">XPlmi_SendIpiCmdToSlaveSlr</a> (u32 *Payload, u32 *RespBuf)</td></tr>
<tr class="memdesc:ga09694a4b8467a90ed7afdda529d5f721"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function handles invalid commands.  <a href="group__xplmi__apis.html#ga09694a4b8467a90ed7afdda529d5f721">More...</a><br/></td></tr>
<tr class="separator:ga09694a4b8467a90ed7afdda529d5f721"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ad6a8b284e3662ef4e292ef4e0b30a3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xplmi__ssit_8c.html#a6ad6a8b284e3662ef4e292ef4e0b30a3">XPlmi_NotifySldSlaveSlrs</a> (void)</td></tr>
<tr class="memdesc:a6ad6a8b284e3662ef4e292ef4e0b30a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function notifies other SLRs about Secure Lockdown or tamper condition in SSIT devices.  <a href="#a6ad6a8b284e3662ef4e292ef4e0b30a3">More...</a><br/></td></tr>
<tr class="separator:a6ad6a8b284e3662ef4e292ef4e0b30a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd1e6ebdc8ae4c1fe401a4697b7f8bef"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xplmi__ssit_8c.html#afd1e6ebdc8ae4c1fe401a4697b7f8bef">XPlmi_InterSlrSldHandshake</a> (void)</td></tr>
<tr class="memdesc:afd1e6ebdc8ae4c1fe401a4697b7f8bef"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function performs handshake between SLRs on SSIT ERR lines.  <a href="#afd1e6ebdc8ae4c1fe401a4697b7f8bef">More...</a><br/></td></tr>
<tr class="separator:afd1e6ebdc8ae4c1fe401a4697b7f8bef"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="afd1e6ebdc8ae4c1fe401a4697b7f8bef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void XPlmi_InterSlrSldHandshake </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function performs handshake between SLRs on SSIT ERR lines. </p>
<pre class="fragment">    This has to be done on SSIT devices before doing secure lockdown
</pre><dl class="section return"><dt>Returns</dt><dd>None </dd></dl>

<p>References <a class="el" href="xplmi__util_8c.html#abcc76ee00f04f9e7586c5e0ab6c5a9c8">XPlmi_UtilPoll()</a>, <a class="el" href="xplmi__util_8c.html#a37b89dae983863fe5532461884763916">XPlmi_UtilPollForMask()</a>, and <a class="el" href="xplmi__util_8c.html#abca9a90771dbe58c7df671842aa33c13">XPlmi_UtilPollNs()</a>.</p>

</div>
</div>
<a class="anchor" id="a6ad6a8b284e3662ef4e292ef4e0b30a3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void XPlmi_NotifySldSlaveSlrs </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function notifies other SLRs about Secure Lockdown or tamper condition in SSIT devices. </p>
<dl class="section return"><dt>Returns</dt><dd>None </dd></dl>

<p>Referenced by <a class="el" href="xplmi__tamper_8h.html#a409ca4e187fb02b456319b706ea01e1f">XPlmi_TriggerTamperResponse()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
	<p class="footer">&copy; Copyright 2015-2022 Xilinx, Inc. All Rights Reserved.</p>
	<p class="footer">&copy; Copyright 2022-2023 Advanced Micro Devices, Inc. All Rights Reserved.</p>
</div>
</body>
</html>
